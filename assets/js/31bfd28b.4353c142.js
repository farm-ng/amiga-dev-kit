"use strict";(self.webpackChunkamiga_developers_website=self.webpackChunkamiga_developers_website||[]).push([[779],{63060:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var s=t(74848),o=t(28453);const r={id:"canbus-overview",title:"Canbus"},a="Canbus Service Overview",i={id:"concepts/canbus_service/canbus-overview",title:"Canbus",description:"The Canbus service is an integral component of the Amiga platform.",source:"@site/docs/concepts/canbus_service/README.md",sourceDirName:"concepts/canbus_service",slug:"/concepts/canbus_service/",permalink:"/docs/concepts/canbus_service/",draft:!1,unlisted:!1,editUrl:"https://github.com/farm-ng/amiga-dev-kit/tree/main/website/docs/concepts/canbus_service/README.md",tags:[],version:"current",frontMatter:{id:"canbus-overview",title:"Canbus"},sidebar:"Developer",previous:{title:"Oak",permalink:"/docs/concepts/oak_service/"},next:{title:"Filter",permalink:"/docs/concepts/filter_service/"}},c={},l=[{value:"Data Streams",id:"data-streams",level:2},{value:"API",id:"api",level:2},{value:"Safety and Operation",id:"safety-and-operation",level:2},{value:"Common Use-Cases",id:"common-use-cases",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"canbus-service-overview",children:"Canbus Service Overview"})}),"\n",(0,s.jsx)(n.p,{children:"The Canbus service is an integral component of the Amiga platform.\nThis service offers direct control over the robot's motors, allowing users to both\npublish motor states and send specific commands to manipulate the robot's movements."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Control and manage the motors on the Amiga, handling command reception,\nprocessing, and motor instruction."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Communication"}),": Direct interface with motors via CAN bus, a communication standard\nor microcontrollers and devices."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dependencies"}),": Standalone service, but pivotal for many autonomous operations.\nNotably, the Track Follower service is heavily reliant on the Canbus service."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"data-streams",children:"Data Streams"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/motor_states"}),": Streams state messages from the motors of your Amiga, such as voltage and RPM.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(n.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/canbus/canbus.proto",children:"canbus_pb2.MotorStates"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/pendant"}),": Streams state messages from the pedant of your Amiga, such as buttons pressed.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(n.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/canbus/amiga_v6.proto",children:"amiga_v6_pb2.PendantState"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/raw_messages"}),":A"," representation of raw CAN bus messages with timestamps, node IDs, error\nflags, remote transmission indicators, and encoded payloads.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(n.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/canbus/canbus.proto",children:"canbus_pb2.RawCanbusMessages"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/state"}),": State of the Amiga CAN bus.\nEncapsulates key information required to evaluate the state of the Amiga robot.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(n.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/canbus/amiga_v6.proto",children:"amiga_v6_pb2.AmigaV6CanbusState"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/tool_statuses"}),": State of the tools (if any) connected to your Amiga.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(n.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/canbus/tool_control.proto",children:"tool_control_pb2.ToolStatuses"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/twist"}),": The commanded linear velocity of the vehicle in the x direction in meters per second.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(n.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/canbus/canbus.proto",children:"canbus_pb2.Twist2d"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/twist"}),": Receives twist commands (linear and angular velocities) and instructs the\nmotors accordingly."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/can_message"}),": Accepts a specific Protobuf message format (details TBD)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/get_battery_state"}),": Returns the battery state.\nA float value indicating the battery's state of charge, ranging [0.0, 1.0].\nIf no motors are connected, it returns -1.0."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/control_tools"}),": Control the tools / actuators based on the ActuatorCommands message."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/stop_all_tools"}),": Stop all tools and prevent control for a predetermined duration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/yield_all_tools"}),": Prevent control for a predetermined duration."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/config_request"}),": Use the farm-ng SDO protocol to send a config request to the dashboard."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"safety-and-operation",children:"Safety and Operation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Operating Mode"}),": The robot should be in automode (activated via the dashboard)\nto utilize the Canbus service."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Safety Perimeter"}),": Establish a clear perimeter when operating the robot, as motor\ncommands will induce movement, ensuring safe operation."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-use-cases",children:"Common Use-Cases"}),"\n",(0,s.jsx)(n.p,{children:"The Canbus service is foundational for many of Amiga's autonomous functionalities.\nFor instance, the Track Follower service is a prominent client of the Canbus service, making the\nCanbus service pivotal for any autonomous motion or activity undertaken by the Amiga."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var s=t(96540);const o={},r=s.createContext(o);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);