"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8685],{2542:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=t(7462),l=(t(7294),t(3905));t(1839);const r={id:"file-reader-can",title:"File Reader Can"},i="File Reader Can Example",o={unversionedId:"examples/file_reader_can/file-reader-can",id:"examples/file_reader_can/file-reader-can",title:"File Reader Can",description:"In this example you will learn how to upload data to this program",source:"@site/docs/examples/file_reader_can/README.md",sourceDirName:"examples/file_reader_can",slug:"/examples/file_reader_can/",permalink:"/docs/examples/file_reader_can/",draft:!1,editUrl:"https://github.com/farm-ng/amiga-dev-kit/tree/main/website/docs/examples/file_reader_can/README.md",tags:[],version:"current",frontMatter:{id:"file-reader-can",title:"File Reader Can"},sidebar:"examples",previous:{title:"File Reader",permalink:"/docs/examples/file_reader/"},next:{title:"Camera Client",permalink:"/docs/examples/camera_client/"}},s={},p=[{value:"Make a Data folder",id:"make-a-data-folder",level:2},{value:"Download the log file",id:"download-the-log-file",level:2},{value:"Setup",id:"setup",level:2},{value:"Install",id:"install",level:2},{value:"Run example",id:"run-example",level:2}],d={toc:p};function u(e){let{components:a,...t}=e;return(0,l.kt)("wrapper",(0,n.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"file-reader-can-example"},"File Reader Can Example"),(0,l.kt)("p",null,"In this example you will learn how to upload data to this ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/farm-ng/farm-ng-amiga/tree/main/py/examples/file_reader_can"},"program"),"\nand run the example on your machine."),(0,l.kt)("p",null,"This example parses the CAN data from a recorded log and prints the ",(0,l.kt)("inlineCode",{parentName:"p"},"AmigaTpdo1")," parsed values. The ",(0,l.kt)("inlineCode",{parentName:"p"},"AmigaTpdo1")," can packet contains\nthe ",(0,l.kt)("inlineCode",{parentName:"p"},"state"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"speed"),", and ",(0,l.kt)("inlineCode",{parentName:"p"},"angular rate")," of the Amiga, as reported by the vehicle control unit (VCU)."),(0,l.kt)("p",null,"This is an example data file you can use. We will also teach you how to get your own directly from the Amiga."),(0,l.kt)("p",null,"Follow the instructions to clone the repository if you haven't already ",(0,l.kt)("a",{parentName:"p",href:"/docs/brain/brain-install#clone-the-repository"},"here")),(0,l.kt)("p",null,"Now we will make a data folder for all of our log files and other things that will be useful to us, if you already have such a folder\nyou can skip that step."),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"If you went through the file_reader example than you will have already done the following steps skip to ",(0,l.kt)("a",{parentName:"p",href:"#install"},(0,l.kt)("strong",{parentName:"a"},"here"))," to\ncontinue.")),(0,l.kt)("h2",{id:"make-a-data-folder"},"Make a Data folder"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"cd <to-your-base-directory>\nmkdir <data-file>\ncd <data-file>\npwd # the output of this is your <path> can copy this for later\n")),(0,l.kt)("h2",{id:"download-the-log-file"},"Download the log file"),(0,l.kt)("p",null,"Now you are going to download this log file that you can use in this example and will go in this folder\nThe ","[file is here]","(",(0,l.kt)("a",{parentName:"p",href:"https://farm-ng-dev-auto-plot-mvp.s3.us-west-2.amazonaws.com/datasets/western-growers-2022-12-05/"},"https://farm-ng-dev-auto-plot-mvp.s3.us-west-2.amazonaws.com/datasets/western-growers-2022-12-05/"),"\nevents_12052022115852.bin)"),(0,l.kt)("p",null," Now that the file is downloaded you do the following\nopen a new terminal"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~\ncd Downloads\nmv events_12052022115852.bin <path-to-where-data-file-is-above>\n")),(0,l.kt)("p",null," Now that you have your log file in the correct place navigate to where the repository ",(0,l.kt)("inlineCode",{parentName:"p"},"farm-ng-amiga")," is and"),(0,l.kt)("h2",{id:"setup"},"Setup"),(0,l.kt)("p",null,"Create first a virtual environment"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"python3 -m venv venv\nsource venv/bin/activate\n")),(0,l.kt)("h2",{id:"install"},"Install"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"cd py/examples/file_reader_can\npip install -r requirements.txt\n")),(0,l.kt)("h2",{id:"run-example"},"Run example"),(0,l.kt)("p",null,"Specify the file (download before)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"python main.py --file-name <path-to-file>/events_12052022115852.bin\n")),(0,l.kt)("p",null,"Optionally, you can change the can interface that is played back from the default of ",(0,l.kt)("inlineCode",{parentName:"p"},"can0"),". E.g.,"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"python main.py --file-name <path-to-file>/events_12052022115852.bin --can-interface vcan0\n")),(0,l.kt)("p",null,"If everything worked correctly you should now see a large stream of text come up in your terminal!"),(0,l.kt)("p",null,"The output should look something like this:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"AMIGA TPDO1 Amiga state 2 Measured speed 0.000 Measured angular rate 0.000 @ time 1512.775886915\nAMIGA TPDO1 Amiga state 2 Measured speed 0.000 Measured angular rate 0.000 @ time 1512.843416858\nAMIGA TPDO1 Amiga state 2 Measured speed 0.000 Measured angular rate 0.000 @ time 1512.866171608\nAMIGA TPDO1 Amiga state 2 Measured speed 0.000 Measured angular rate 0.000 @ time 1512.928378193\nAMIGA TPDO1 Amiga state 2 Measured speed 0.000 Measured angular rate 0.000 @ time 1512.985744047\nAMIGA TPDO1 Amiga state 2 Measured speed 0.000 Measured angular rate 0.000 @ time 1513.019865388\nAMIGA TPDO1 Amiga state 2 Measured speed 0.000 Measured angular rate 0.000 @ time 1513.076998664")),(0,l.kt)("p",null,"Congrats you are done!"))}u.isMDXComponent=!0}}]);