"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[962],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var a=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=a.createContext({}),s=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(r),m=o,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||n;return r?a.createElement(h,i(i({ref:t},c),{},{components:r})):a.createElement(h,i({ref:t},c))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,i=new Array(n);i[0]=u;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var s=2;s<n;s++)i[s]=r[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},8846:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>n,metadata:()=>p,toc:()=>s});var a=r(7462),o=(r(7294),r(3905));const n={id:"fpv",title:"FPV Example"},i="amiga-dev-kit FPV example",p={unversionedId:"examples/FPV/fpv",id:"examples/FPV/fpv",title:"FPV Example",description:"Link to FPV/code.py",source:"@site/docs/examples/FPV/README.md",sourceDirName:"examples/FPV",slug:"/examples/FPV/",permalink:"/amiga-dev-kit/docs/examples/FPV/",draft:!1,editUrl:"https://github.com/farm-ng/amiga-dev-kit/tree/main/website/docs/examples/FPV/README.md",tags:[],version:"current",frontMatter:{id:"fpv",title:"FPV Example"},sidebar:"docs",previous:{title:"Cansniffer Example",permalink:"/amiga-dev-kit/docs/examples/cansniffer/"}},l={},s=[{value:"Link to <code>FPV/code.py</code>",id:"link-to-fpvcodepy",level:3},{value:"Resources",id:"resources",level:2},{value:"Parts required:",id:"parts-required",level:3},{value:"About SBUS",id:"about-sbus",level:2},{value:"Wiring",id:"wiring",level:2},{value:"TODO / WIP",id:"todo--wip",level:2},{value:"Code",id:"code",level:2}],c={toc:s};function d(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"amiga-dev-kit-fpv-example"},"amiga-dev-kit FPV example"),(0,o.kt)("h3",{id:"link-to-fpvcodepy"},(0,o.kt)("a",{parentName:"h3",href:"https://github.com/farm-ng/amiga-dev-kit/blob/main/examples/FPV/code.py"},"Link to ",(0,o.kt)("inlineCode",{parentName:"a"},"FPV/code.py"))),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/11846963/185976329-c65208e1-a42a-436f-a191-9dcc57ecb354.jpg",alt:"fpv-in-truck-16x9-reduced"})),(0,o.kt)("p",null,"This example shows how to connect off the shelf FPV equipment to your Amiga to enable realtime video streaming and teleoperation through remote control.\nThis makes the Amiga remotely operable from the comfort of your office (or cab of your truck) and we're pretty psyched by how low cost and practical FPV control of the Amiga is."),(0,o.kt)("h2",{id:"resources"},"Resources"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Video demonstration of our first test : ",(0,o.kt)("a",{parentName:"li",href:"https://youtu.be/tN20_CspsyU"},"https://youtu.be/tN20_CspsyU")),(0,o.kt)("li",{parentName:"ul"},"Link to wiring diagram in LucidChart : ",(0,o.kt)("a",{parentName:"li",href:"https://lucid.app/lucidchart/7255e46a-d128-421e-9bc1-2329d3f280fa/edit?viewport_loc=285%2C-61%2C1837%2C2040%2C0_0&invitationId=inv_f69a2688-850c-4d8f-bfdb-c38752df5303#"},"https://lucid.app/lucidchart/7255e46a-d128-421e-9bc1-2329d3f280fa/edit?viewport_loc=285%2C-61%2C1837%2C2040%2C0_0&invitationId=inv_f69a2688-850c-4d8f-bfdb-c38752df5303#")),(0,o.kt)("li",{parentName:"ul"},"Blog post about the project :"),(0,o.kt)("li",{parentName:"ul"},"Adafruit Feather Documentation (microcontroller we commonly use for sending/receiving CANbus messages : ",(0,o.kt)("a",{parentName:"li",href:"https://learn.adafruit.com/adafruit-feather-m4-can-express"},"https://learn.adafruit.com/adafruit-feather-m4-can-express")),(0,o.kt)("li",{parentName:"ul"},"Setting up the Feather with our recommended firmware :")),(0,o.kt)("h3",{id:"parts-required"},"Parts required:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A radio control receiver, such as the FrSky x8r  ",(0,o.kt)("a",{parentName:"li",href:"https://www.frsky-rc.com/product/x8r/"},"https://www.frsky-rc.com/product/x8r/")," - On amazon $40 - ",(0,o.kt)("a",{parentName:"li",href:"https://www.amazon.com/dp/B00RCAHHFM"},"https://www.amazon.com/dp/B00RCAHHFM"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"We chose this one, because it supports SBUS (which is compatible with UART ports on the Amiga Dev Kit microcontroller) and also sending telemetry for two way communication"))),(0,o.kt)("li",{parentName:"ul"},"A radio controller, such as the FrSky Taranis X9D Plus SE 2019 -",(0,o.kt)("a",{parentName:"li",href:"https://www.amazon.com/dp/B07VYRGB5Q"},"https://www.amazon.com/dp/B07VYRGB5Q")," - $300",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"don't forget to also purchase a battery - ",(0,o.kt)("a",{parentName:"li",href:"https://www.amazon.com/Upgrade-3000mAh-Rechargeable-Radiolink-Transmitter/dp/B08FC4LWCG"},"https://www.amazon.com/Upgrade-3000mAh-Rechargeable-Radiolink-Transmitter/dp/B08FC4LWCG")," - $20"))),(0,o.kt)("li",{parentName:"ul"},"An FPV video camera - ",(0,o.kt)("a",{parentName:"li",href:"https://www.amazon.com/dp/B06XPX18VY?psc=1&ref=ppx_yo2ov_dt_b_product_details&pldnSite=1"},"https://www.amazon.com/dp/B06XPX18VY?psc=1&ref=ppx_yo2ov_dt_b_product_details&pldnSite=1")," - $25"),(0,o.kt)("li",{parentName:"ul"},"An FPV video transmitter/receiver - ",(0,o.kt)("a",{parentName:"li",href:"https://www.amazon.com/dp/B01FXGQ2KC?psc=1&ref=ppx_yo2ov_dt_b_product_details&pldnSite=1"},"https://www.amazon.com/dp/B01FXGQ2KC?psc=1&ref=ppx_yo2ov_dt_b_product_details&pldnSite=1")," - $30",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Note that this transmitter/receiver requires an RCA capable monitor on the receiver side.")))),(0,o.kt)("h2",{id:"about-sbus"},"About SBUS"),(0,o.kt)("p",null,'SBUS is "inverted" UART.  So we cracked open the x8r receiver, and soldered the yellow wire directly to the output pin before it gets inverted, and connected this wire to UART RX pin on the Feather.'),(0,o.kt)("p",null,"Found this link useful ",(0,o.kt)("a",{parentName:"p",href:"https://oscarliang.com/uninverted-sbus-smart-port-frsky-receivers/"},"https://oscarliang.com/uninverted-sbus-smart-port-frsky-receivers/"),"\nHere is a great video overview on SBUS, visually explaining inverted vs. non-inverted uart and packet structure ",(0,o.kt)("a",{parentName:"p",href:"https://youtu.be/IqLUHj7nJhI?t=398"},"https://youtu.be/IqLUHj7nJhI?t=398")," "),(0,o.kt)("p",null,"The SBUS protocol is fairly simple.  A 25 byte packet, start byte of 0x0F, end byte of 0x00, second to last byte is a parity byte, and then 16 11bit integers packed into the rest.  This is a useful resource for decoding the packets -     # ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/robotmaker/Real-time-graphical-representation-of-16-channel-S-BUS-protocol/blob/master/ProcessingSketch_SBUS_16_Channel_Simulation/ProcessingSketch_SBUS_16_Channel_Simulation.pde"},"https://github.com/robotmaker/Real-time-graphical-representation-of-16-channel-S-BUS-protocol/blob/master/ProcessingSketch_SBUS_16_Channel_Simulation/ProcessingSketch_SBUS_16_Channel_Simulation.pde")),(0,o.kt)("p",null,"The UART needs to be configured with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"busio.UART(None, board.RX, baudrate=100000, bits=8, parity=0, stop=2, timeout=0.002, receiver_buffer_size=256)\n")),(0,o.kt)("p",null,"TODO support TX over the x8r smart bus."),(0,o.kt)("h2",{id:"wiring"},"Wiring"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/11846963/185976402-ff8c4c77-5a08-42b0-865f-d2840fc0b960.jpg",alt:"fpv wiring example"}),"\nShown above, is the entire receiver rover side of the FPV setup, correctly wired and unpacked."),(0,o.kt)("h2",{id:"todo--wip"},"TODO / WIP"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Step 1\nWiring the receiver to access the un-inverted signal")),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/11846963/185978326-a21598e7-fe93-4c99-9ff3-f3b047d586e6.jpg",alt:"x8r-receiver-solder-point-reduced"})),(0,o.kt)("h2",{id:"code"},"Code"),(0,o.kt)("p",null,"This code builds on top of the hello_main_loop example, but replaces the keyboard input with radio control.  Wire up the SBUS, connect the microcontroller to the Amiga's canbus, enable Auto mode on the Amiga's dashboard and enjoy driving the Amiga remotely."))}d.isMDXComponent=!0}}]);