"use strict";(self.webpackChunkamiga_developers_website=self.webpackChunkamiga_developers_website||[]).push([[9945],{459:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=t(5893),s=t(1151);const i={id:"brain-apps",title:"Custom Applications (ReactJS)"},r="Developing Custom Applications",o={id:"brain/brain-apps",title:"Custom Applications (ReactJS)",description:"Create an app",source:"@site/docs/brain/custom-applications.mdx",sourceDirName:"brain",slug:"/brain/brain-apps",permalink:"/docs/brain/brain-apps",draft:!1,unlisted:!1,editUrl:"https://github.com/farm-ng/amiga-dev-kit/tree/main/website/docs/brain/custom-applications.mdx",tags:[],version:"current",frontMatter:{id:"brain-apps",title:"Custom Applications (ReactJS)"},sidebar:"examples",previous:{title:"Monitor App",permalink:"/docs/examples/monitor_app/"},next:{title:"Custom Applications (Kivy)",permalink:"/docs/brain/brain-apps-kivy"}},l={},c=[{value:"Create an app",id:"create-an-app",level:3},{value:"Create a repository from the template",id:"create-a-repository-from-the-template",level:4},{value:"Project structure",id:"project-structure",level:2},{value:"Understand the structure of an app",id:"understand-the-structure-of-an-app",level:3},{value:"Backend:",id:"backend",level:4},{value:"Frontend:",id:"frontend",level:4},{value:"Repository structure",id:"repository-structure",level:3},{value:"The <code>manifest.json</code> file",id:"the-manifestjson-file",level:4},{value:"How to setup the project",id:"how-to-setup-the-project",level:2},{value:"How to run the project",id:"how-to-run-the-project",level:2},{value:"Run the backend in a terminal",id:"run-the-backend-in-a-terminal",level:3},{value:"Run the app in the launcher",id:"run-the-app-in-the-launcher",level:3},{value:"Debugging the App on the Launcher",id:"debugging-the-app-on-the-launcher",level:3},{value:"Viewing Logs and Outputs",id:"viewing-logs-and-outputs",level:4},{value:"Managing Your Application",id:"managing-your-application",level:4}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"developing-custom-applications",children:"Developing Custom Applications"}),"\n",(0,a.jsx)(n.h3,{id:"create-an-app",children:"Create an app"}),"\n",(0,a.jsx)(n.h4,{id:"create-a-repository-from-the-template",children:"Create a repository from the template"}),"\n",(0,a.jsxs)(n.p,{children:["To create your own custom application navigate to the ",(0,a.jsx)(n.a,{href:"https://github.com/farm-ng/amiga-app-template",children:(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"amiga-app-template"})})})," repository on GitHub."]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["You need to be signed into your GitHub account to see the option to ",(0,a.jsx)(n.code,{children:"Use this template"}),"."]})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://user-images.githubusercontent.com/5157099/205272492-356c1540-948e-43dc-8f60-8992caa8d511.gif",alt:"Create a new templated repository"})}),"\n",(0,a.jsx)(n.p,{children:"Written instructions (same as video above):"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Click on green ",(0,a.jsx)(n.em,{children:"Use this template"})," button (top right) to create a new repository based on this repo"]}),"\n",(0,a.jsxs)(n.li,{children:["Fill out:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Owner: (your_username)"}),"\n",(0,a.jsxs)(n.li,{children:["Repository Name: whatever-you-want","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Should be between between 4-17 characters, and"}),"\n",(0,a.jsx)(n.li,{children:"Use underscores (_) or dashes (-) for separating words (no spaces!)\n-Select Public box\n-Click [Create repository from template]\nDone!"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Now that you have created a new git repository, you have two options:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Work in your local workspace (for development)"}),"\n",(0,a.jsx)(n.li,{children:"Work in a Remote-SSH session on your robot (deployment on a brain)"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["If you have not yet established a Remote-SSH connection, refer to this documentation:\n",(0,a.jsx)(n.a,{href:"https://amiga.farm-ng.com/docs/ssh/",children:"https://amiga.farm-ng.com/docs/ssh/"})]}),"\n",(0,a.jsx)(n.p,{children:"For this example, we recommend option 2 and clone the repository directly onto the brain."}),"\n",(0,a.jsx)(n.p,{children:"After you have established connection:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd <to-your-base-directory>\ngit clone https://github.com/YOUR-USERNAME/YOUR-REPOSITORY.git\n"})}),"\n",(0,a.jsx)(n.h2,{id:"project-structure",children:"Project structure"}),"\n",(0,a.jsx)(n.h3,{id:"understand-the-structure-of-an-app",children:"Understand the structure of an app"}),"\n",(0,a.jsx)(n.p,{children:"Every modern app typically consists of two main parts: the backend and the frontend.\nLet's dive into what each of these components does and how they interact with each other."}),"\n",(0,a.jsx)(n.h4,{id:"backend",children:"Backend:"}),"\n",(0,a.jsx)(n.p,{children:'The backend is like the brain of your app. It processes data, makes calculations,\ncommunicates with databases, and performs all the logical operations. When you hear\nterms like "server," "API," or "database," they\'re usually related to the backend.'}),"\n",(0,a.jsx)(n.p,{children:"In our example, we're using FastAPI to build our backend. FastAPI is a modern,\nhigh-performance web framework for building APIs. Coupled with the farm-ng brain services,\nour backend will fetch and serve data efficiently and securely to the frontend."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Key Points:"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Handles data processing, storage, and retrieval."}),"\n",(0,a.jsx)(n.li,{children:"Communicates with other services and databases."}),"\n",(0,a.jsx)(n.li,{children:"Secures data and ensures only authorized users can access it."}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"frontend",children:"Frontend:"}),"\n",(0,a.jsx)(n.p,{children:"The frontend is the part of the app users see and interact with.\nThink of it as the face of your app which includes everything that you can touch, click,\nor interact with: buttons, images, text inputs, animations, and more."}),"\n",(0,a.jsx)(n.p,{children:"For our frontend, we're using ReactJS. ReactJS is a popular JavaScript library for building user interfaces.\nIt allows developers to create responsive and interactive UI components easily."}),"\n",(0,a.jsx)(n.h3,{id:"repository-structure",children:"Repository structure"}),"\n",(0,a.jsxs)(n.p,{children:["In vs-code, you can see the project structure on the left side in the ",(0,a.jsx)(n.code,{children:"EXPLORER"}),":"]}),"\n",(0,a.jsx)(n.p,{children:"Below are listed the most important components:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"repository-name/  # Root level of the project.\n\u251c\u2500\u2500 ts/ # Contains ReactJS frontend code.\n|   \u251c\u2500\u2500 index.html  # The HTML template of the app frontend.\n|   \u251c\u2500\u2500 package.json  # The file containing the dependencies of the project frontend.\n|   \u2514\u2500\u2500 src/\n|       \u251c\u2500\u2500 components/  # Contains ReactJS components.\n|       |   \u251c\u2500\u2500 TopicMonitor.tsx  # The component that displays the topic monitor.\n|       |   \u2514\u2500\u2500 App.tsx  # The main entry point of the app frontend.\n|       \u2514\u2500\u2500 main.tsx  # The main entry point of the app frontend.\n\u251c\u2500\u2500 main.py\n|   # The main entry point of the app backend.\n\u251c\u2500\u2500 manifest.json\n|   # The file containing the metadata of the project.\n\u251c\u2500\u2500 install.sh\n|   # The script to register the app in the launcher.\n\u251c\u2500\u2500 uninstall.sh\n|   # The script to unregister the app from the launcher.\n\u2514\u2500\u2500 requirements.txt\n    # The file containing the dependencies of the project backend.\n"})}),"\n",(0,a.jsxs)(n.h4,{id:"the-manifestjson-file",children:["The ",(0,a.jsx)(n.code,{children:"manifest.json"})," file"]}),"\n",(0,a.jsx)(n.p,{children:"In this file, you can find the metadata of the app. This file is used by the launcher\nand has the following structure:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n   "services": {\n        "example-app": {\n            "name": "example-app",\n            "type": "app",\n            "exec_cmd": "main.py",\n            "args": [\n                "--config /opt/farmng/config.json --port 8042"\n            ],\n            "http_gui_port": 8042,\n            "display_name": "Example App"\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["Learn more about the manifest file ",(0,a.jsx)(n.a,{href:"/docs/brain/brain-apps-manifest",children:"here"}),"."]})}),"\n",(0,a.jsx)(n.h2,{id:"how-to-setup-the-project",children:"How to setup the project"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Begin by installing node version manager (nvm) in the /ts directory."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ts/\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash\n"})}),"\n",(0,a.jsx)(n.p,{children:"Once this has finished running, you should see the following message:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'=> Close and reopen your terminal to start using nvm or run the following to use it now:\n\nexport NVM_DIR="$HOME/.nvm"\n[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"  # This loads nvm\n[ -s "$NVM_DIR/bash_completion" ] && \\. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Verify installation by closing and re-opening the terminal and running:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"nvm --version\n    0.34.0\n"})}),"\n",(0,a.jsx)(n.p,{children:"You should see a version >= 0.34.0."}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"Prepare the frontend and compile the typescript code to javascript"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"nvm install --lts\nnpm install\nnpm run build  # build the frontend\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:"Prepare the backend"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Install the dependencies of the backend"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ..\npython3 -m venv venv  # create a virtual environment\nsource venv/bin/activate  # activate the virtual environment\npip install -r requirements.txt  # install dependencies\n"})}),"\n",(0,a.jsx)(n.h2,{id:"how-to-run-the-project",children:"How to run the project"}),"\n",(0,a.jsx)(n.h3,{id:"run-the-backend-in-a-terminal",children:"Run the backend in a terminal"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"python main.py --config /opt/farmng/config.json\n"})}),"\n",(0,a.jsx)(n.p,{children:"Optionally, you can run into debug mode to use the local frontend instead of\nthe one served by the launcher."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"python main.py --config /opt/farmng/config.json --debug\n"})}),"\n",(0,a.jsxs)(n.p,{children:["To visualize the app in your browser, go to ",(0,a.jsx)(n.a,{href:"http://localhost:8042",children:"http://localhost:8042"})]}),"\n",(0,a.jsx)(n.h3,{id:"run-the-app-in-the-launcher",children:"Run the app in the launcher"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Register the app in the launcher"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./install.sh\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Now you should be able to see the app in the launcher and run it."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://user-images.githubusercontent.com/5157099/279948050-31df3a3f-59f4-47ed-bc6a-cb39d95b07da.png",alt:"app view"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"If for some reason you need to remove your app from the launcher"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./uninstall.sh\n"})}),"\n",(0,a.jsx)(n.h3,{id:"debugging-the-app-on-the-launcher",children:"Debugging the App on the Launcher"}),"\n",(0,a.jsx)(n.h4,{id:"viewing-logs-and-outputs",children:"Viewing Logs and Outputs"}),"\n",(0,a.jsxs)(n.p,{children:["Once your project is launched through the farm-ng-launcher, it will no longer be runnable as a\nstandalone Python script.\nInstead, you can monitor and debug it using the ",(0,a.jsx)(n.code,{children:"journalctl"})," tool.\nThis tool allows you to view logs and outputs from your project in real-time."]}),"\n",(0,a.jsx)(n.p,{children:"To see a list of all running services, use:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"journalctl -f --user-unit\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Press Tab twice to auto-complete and view a list of all available services.\nLook for your application, which will be named in the format ",(0,a.jsx)(n.code,{children:"<your-app-name>.service"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["To view the outputs of your application, complete the ",(0,a.jsx)(n.code,{children:"journalctl"})," command like this:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"journalctl -f --user-unit <your-app-name>.service\n"})}),"\n",(0,a.jsx)(n.h4,{id:"managing-your-application",children:"Managing Your Application"}),"\n",(0,a.jsx)(n.p,{children:"If you make changes to the backend code, you'll need to restart your application for these changes to take effect.\nThis can be done using systemctl, which manages the application processes."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"To start your application:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"systemctl --user start <your-app-name>.service\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"To stop your application:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"systemctl --user stop <your-app-name>.service\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"To restart your application:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"systemctl --user restart <your-app-name>.service\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>r});var a=t(7294);const s={},i=a.createContext(s);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);