"use strict";(self.webpackChunkamiga_developers_website=self.webpackChunkamiga_developers_website||[]).push([[4211],{60367:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var s=n(74848),t=n(28453);const a={id:"oak-overview",title:"Oak"},r="Oak Service Overview",o={id:"concepts/oak_service/oak-overview",title:"Oak",description:"The OAK service is a versatile component in the Amiga ecosystem, providing valuable data streams",source:"@site/docs/concepts/oak_service/README.md",sourceDirName:"concepts/oak_service",slug:"/concepts/oak_service/",permalink:"/docs/concepts/oak_service/",draft:!1,unlisted:!1,editUrl:"https://github.com/farm-ng/amiga-dev-kit/tree/main/website/docs/concepts/oak_service/README.md",tags:[],version:"current",frontMatter:{id:"oak-overview",title:"Oak"},sidebar:"Developer",previous:{title:"GPS",permalink:"/docs/concepts/gps_service/"},next:{title:"Canbus",permalink:"/docs/concepts/canbus_service/"}},c={},l=[{value:"Stream-only Operation",id:"stream-only-operation",level:2},{value:"Message Types",id:"message-types",level:2},{value:"Data Streams",id:"data-streams",level:2},{value:"API",id:"api",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Practical Applications",id:"practical-applications",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"oak-service-overview",children:"Oak Service Overview"})}),"\n",(0,s.jsx)(i.p,{children:"The OAK service is a versatile component in the Amiga ecosystem, providing valuable data streams\nfrom the onboard OAK-D device, which includes stereo vision capabilities and an Inertial Measurement\nUnit (IMU).\nThis service doesn't serve a singular purpose; instead, it offers a range of data that can be\ninstrumental for various user-defined applications, from navigation and mapping to object detection\nand data collection."}),"\n",(0,s.jsx)(i.p,{children:"The OAK service data, especially coming from the IMU, plays a significant role in the Amiga's autonomous\nnavigation capabilities, as it is fused with GPS and wheel odometry data in the Filter service\n(using an Unscented Kalman Filter)."}),"\n",(0,s.jsxs)(i.p,{children:["Beginning with ",(0,s.jsx)(i.a,{href:"/docs/release-notes/release-023/",children:(0,s.jsx)(i.strong,{children:"AmigaOS 2.3 Elderberry"})}),",\nthe Oak service is a sub-service included as part of the ",(0,s.jsx)(i.a,{href:"/docs/concepts/amiga_service",children:(0,s.jsx)(i.strong,{children:"Amiga Service"})}),".\nThis sub-service now handles all oak devices connected to your Amiga in a single service."]}),"\n",(0,s.jsx)(i.h2,{id:"stream-only-operation",children:"Stream-only Operation"}),"\n",(0,s.jsx)(i.p,{children:"The Oak sub-service is not a client of any other services.\nIt is, however, used by other services like the Filter service!"}),"\n",(0,s.jsx)(i.h2,{id:"message-types",children:"Message Types"}),"\n",(0,s.jsx)(i.p,{children:"Clients can subscribe to the OAK service to access the messages it publishes.\nThese messages can include various data types such as:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Stereo vision (right and left)"}),"\n",(0,s.jsx)(i.li,{children:"RGB data"}),"\n",(0,s.jsx)(i.li,{children:"Accelerometer data"}),"\n",(0,s.jsx)(i.li,{children:"Gyroscope data"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"data-streams",children:"Data Streams"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/calibration"}),": Intrinsic parameters of the cameras.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(i.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/oak/oak.proto#L139-L154",children:"oak_pb2.OakCalibration"})]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/disparity"}),": Disparity (depth image)."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/left"}),": Left stereo image."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/right"}),": Right stereo image."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/rgb"}),": RGB image."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["The disparity, left, right, and rgb images all have the same structure.\nCheck their protobuf definition for more details:\n",(0,s.jsx)(i.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/oak/oak.proto#L38-L41",children:"oak_pb2.OakFrame"})]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"/imu"}),": Accelerometer and Gyroscope data.\nCheck the protobuf definition for more details:\n",(0,s.jsx)(i.a,{href:"https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/oak/oak.proto#L43-L68",children:"oak_pb2.OakImuPackets"})]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"api",children:"API"}),"\n",(0,s.jsx)(i.p,{children:"The OAK service offers a few API endpoints that allow users to interact with and configure the\nOAK-D device's settings:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/calibration"}),": Retrieves the calibration of the device, specifically the intrinsic parameters of\nthe cameras.\nThis is typically a one-time requirement unless the device undergoes significant changes or maintenance."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/camera_settings/rgb"}),": Allows users to configure the RGB camera settings.\nIf no settings are specified in the request, the service will return the current settings."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"/camera_settings/mono"}),": Similar to the RGB settings endpoint, this allows users to configure\nthe mono camera settings or retrieve them if no new configurations are specified."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"While the specifics of these configurations are found in the protobuf definitions, they offer users\nthe ability to customize the camera performance as per their application requirements,\npotentially adjusting parameters like exposure, focus, and white balance."}),"\n",(0,s.jsx)(i.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(i.p,{children:"For the Oak service to function, there's only a single requirement:\nthe oak camera(s) need to be powered via the POE Switch."}),"\n",(0,s.jsx)(i.h2,{id:"practical-applications",children:"Practical Applications"}),"\n",(0,s.jsx)(i.p,{children:"One of the key applications of the OAK service within the Amiga system is contributing to the robot's\nautonomous navigation.\nThe gyroscope data from the OAK service's IMU is crucial for the robot's state estimation,\nas it's fused with other data sources in the Filter service.\nThis fusion helps in achieving accurate positioning and orientation, enabling the Amiga\nto navigate effectively and autonomously."})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>o});var s=n(96540);const t={},a=s.createContext(t);function r(e){const i=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:i},e.children)}}}]);