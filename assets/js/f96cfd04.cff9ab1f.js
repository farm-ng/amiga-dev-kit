"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[346],{3905:(e,t,a)=>{a.d(t,{Zo:()=>o,kt:()=>k});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),c=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},o=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,p=e.parentName,o=s(e,["components","mdxType","originalType","parentName"]),u=c(a),k=n,m=u["".concat(p,".").concat(k)]||u[k]||d[k]||l;return a?r.createElement(m,i(i({ref:t},o),{},{components:a})):r.createElement(m,i({ref:t},o))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var c=2;c<l;c++)i[c]=a[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5010:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var r=a(7462),n=(a(7294),a(3905));const l={sidebar_label:"general",title:"utils.general"},i=void 0,s={unversionedId:"reference/circuitpy/utils/general",id:"reference/circuitpy/utils/general",title:"utils.general",description:"path\\_dirname",source:"@site/docs/reference/circuitpy/utils/general.md",sourceDirName:"reference/circuitpy/utils",slug:"/reference/circuitpy/utils/general",permalink:"/amiga-dev-kit/docs/reference/circuitpy/utils/general",draft:!1,editUrl:"https://github.com/farm-ng/amiga-dev-kit/tree/main/website/docs/reference/circuitpy/utils/general.md",tags:[],version:"current",frontMatter:{sidebar_label:"general",title:"utils.general"},sidebar:"api",previous:{title:"cobid",permalink:"/amiga-dev-kit/docs/reference/circuitpy/utils/cobid"},next:{title:"io",permalink:"/amiga-dev-kit/docs/reference/circuitpy/utils/io"}},p={},c=[{value:"path_dirname",id:"path_dirname",level:4},{value:"path_split",id:"path_split",level:4},{value:"path_exists",id:"path_exists",level:4},{value:"path_join",id:"path_join",level:4},{value:"path_basename",id:"path_basename",level:4},{value:"makedirs",id:"makedirs",level:4},{value:"remove_all",id:"remove_all",level:4},{value:"clip",id:"clip",level:4},{value:"rescale",id:"rescale",level:4},{value:"trigger_soft_reset",id:"trigger_soft_reset",level:4},{value:"trigger_hard_reset",id:"trigger_hard_reset",level:4},{value:"ticks_add",id:"ticks_add",level:4},{value:"ticks_diff",id:"ticks_diff",level:4},{value:"ticks_less",id:"ticks_less",level:4},{value:"ticks_fresh",id:"ticks_fresh",level:4},{value:"DtTracker Objects",id:"dttracker-objects",level:2},{value:"age",id:"age",level:4},{value:"ticks_age",id:"ticks_age",level:4},{value:"ticks_age_cumul",id:"ticks_age_cumul",level:4},{value:"start",id:"start",level:4},{value:"stop",id:"stop",level:4},{value:"update_history",id:"update_history",level:4},{value:"update",id:"update",level:4},{value:"mean_dt",id:"mean_dt",level:4},{value:"minmeanmax",id:"minmeanmax",level:4},{value:"TickRepeater Objects",id:"tickrepeater-objects",level:2},{value:"check",id:"check",level:4},{value:"reset",id:"reset",level:4},{value:"update",id:"update-1",level:4},{value:"Repeater Objects",id:"repeater-objects",level:2},{value:"CatchupRepeater Objects",id:"catchuprepeater-objects",level:2},{value:"Axis Objects",id:"axis-objects",level:2},{value:"__init__",id:"__init__",level:4},{value:"map",id:"map",level:4}],o={toc:c};function d(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},o,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h4",{id:"path_dirname"},"path","_","dirname"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def path_dirname(p: str)\n")),(0,n.kt)("p",null,"Returns the directory component of a pathname."),(0,n.kt)("h4",{id:"path_split"},"path","_","split"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def path_split(p)\n")),(0,n.kt)("p",null,"Split a pathname."),(0,n.kt)("p",null,"Returns tuple ",'"',"(head, tail)",'"'," where ",'"',"tail",'"'," is everything after the final slash.  Either part may be empty."),(0,n.kt)("h4",{id:"path_exists"},"path","_","exists"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def path_exists(p)\n")),(0,n.kt)("p",null,"Return True if path exists."),(0,n.kt)("h4",{id:"path_join"},"path","_","join"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def path_join(parent: str, child: str)\n")),(0,n.kt)("p",null,"Joins parent and child path."),(0,n.kt)("h4",{id:"path_basename"},"path","_","basename"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def path_basename(p: str)\n")),(0,n.kt)("p",null,"Returns the final component of a pathname."),(0,n.kt)("h4",{id:"makedirs"},"makedirs"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def makedirs(name, exist_ok=False)\n")),(0,n.kt)("p",null,"Wraps makedirs(name ","[, mode=0o777][, exist_ok=False]",")."),(0,n.kt)("p",null,"Super-mkdir; create a leaf directory and all intermediate ones.  Works like mkdir, except that any intermediate path\nsegment (not just the rightmost) will be created if it does not exist. If the target directory already exists, raise\nan OSError if exist_ok is False. Otherwise no exception is raised.  This is recursive."),(0,n.kt)("h4",{id:"remove_all"},"remove","_","all"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def remove_all(name)\n")),(0,n.kt)("p",null,"Recursively remove paths."),(0,n.kt)("h4",{id:"clip"},"clip"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def clip(x, min_value, max_value)\n")),(0,n.kt)("p",null,"Return value, within bounds ","[min,max]"),(0,n.kt)("h4",{id:"rescale"},"rescale"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def rescale(x, x0, x1, y0, y1)\n")),(0,n.kt)("p",null,"Rescale x from (x0, x1) to (y0, y1), with clipping."),(0,n.kt)("h4",{id:"trigger_soft_reset"},"trigger","_","soft","_","reset"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def trigger_soft_reset()\n")),(0,n.kt)("p",null,"Equivalent of CTRL+D."),(0,n.kt)("h4",{id:"trigger_hard_reset"},"trigger","_","hard","_","reset"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def trigger_hard_reset()\n")),(0,n.kt)("p",null,"Equivalent of power cycle / reset button."),(0,n.kt)("h4",{id:"ticks_add"},"ticks","_","add"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def ticks_add(ticks, delta)\n")),(0,n.kt)("p",null,"Add a delta to a base number of ticks, performing wraparound at 2**29ms."),(0,n.kt)("h4",{id:"ticks_diff"},"ticks","_","diff"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def ticks_diff(ticks1, ticks2)\n")),(0,n.kt)("p",null,"Compute the signed difference between two ticks values, assuming that they are within 2**29 ticks"),(0,n.kt)("h4",{id:"ticks_less"},"ticks","_","less"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def ticks_less(ticks1, ticks2)\n")),(0,n.kt)("p",null,"Return true iff ticks1 is less than ticks2, assuming that they are within 2**29 ticks"),(0,n.kt)("h4",{id:"ticks_fresh"},"ticks","_","fresh"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def ticks_fresh(ticks, thresh_ms=1000)\n")),(0,n.kt)("p",null,"Returns true if age of ticks is less than thresh_ms, assuming within 2**29 ticks of current ticks_ms()"),(0,n.kt)("h2",{id:"dttracker-objects"},"DtTracker Objects"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"class DtTracker()\n")),(0,n.kt)("p",null,"Used for tracking multiple timeseries, differentiated by ",(0,n.kt)("inlineCode",{parentName:"p"},"name")," parameter passed to constructor."),(0,n.kt)("h4",{id:"age"},"age"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def age(_ticks_ms)\n")),(0,n.kt)("p",null,"Returns time in ms from last ",(0,n.kt)("inlineCode",{parentName:"p"},"update()")," to _ticks_ms."),(0,n.kt)("h4",{id:"ticks_age"},"ticks","_","age"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def ticks_age() -> int\n")),(0,n.kt)("p",null,"Returns time in ms since last ",(0,n.kt)("inlineCode",{parentName:"p"},"update()")," Updates the time tracker."),(0,n.kt)("h4",{id:"ticks_age_cumul"},"ticks","_","age","_","cumul"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def ticks_age_cumul() -> int\n")),(0,n.kt)("p",null,"Returns time in ms since last ",(0,n.kt)("inlineCode",{parentName:"p"},"update()")," Does NOT update the time tracker."),(0,n.kt)("h4",{id:"start"},"start"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def start(_ticks_ms=None)\n")),(0,n.kt)("p",null,"Start the time tracker."),(0,n.kt)("h4",{id:"stop"},"stop"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def stop(_ticks_ms=None)\n")),(0,n.kt)("p",null,"Stop the time tracker."),(0,n.kt)("h4",{id:"update_history"},"update","_","history"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def update_history(dt_ms)\n")),(0,n.kt)("p",null,"Addend dt history with dt_ms."),(0,n.kt)("h4",{id:"update"},"update"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def update()\n")),(0,n.kt)("p",null,"Reset the time tracker."),(0,n.kt)("h4",{id:"mean_dt"},"mean","_","dt"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def mean_dt()\n")),(0,n.kt)("p",null,"Returns mean of the dt_history."),(0,n.kt)("h4",{id:"minmeanmax"},"minmeanmax"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def minmeanmax()\n")),(0,n.kt)("p",null,"Returns string with min, mean, ","&"," max of the dt_history."),(0,n.kt)("h2",{id:"tickrepeater-objects"},"TickRepeater Objects"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"class TickRepeater()\n")),(0,n.kt)("p",null,"Used as a timer, with the check() method returning true every ",(0,n.kt)("inlineCode",{parentName:"p"},"ticks_period_ms")," Uses ",(0,n.kt)("inlineCode",{parentName:"p"},"ticks_ms"),", which wraps\nevery 2^29 ms (~6.2 days). The logic handles a single wrap between checks, but does not handle two wraps\nbetween checks."),(0,n.kt)("p",null,"See CircuitPython ",(0,n.kt)("inlineCode",{parentName:"p"},"supervisor.ticks_ms()")," docs for more details."),(0,n.kt)("h4",{id:"check"},"check"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def check()\n")),(0,n.kt)("p",null,"This is the recommended method to use for checking the TickRepeater timer."),(0,n.kt)("p",null,"Wraps the ",(0,n.kt)("inlineCode",{parentName:"p"},"update()")," method."),(0,n.kt)("h4",{id:"reset"},"reset"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def reset()\n")),(0,n.kt)("p",null,"Reset the timer to start from the current time."),(0,n.kt)("h4",{id:"update-1"},"update"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def update(ticks)\n")),(0,n.kt)("p",null,"Returns ",(0,n.kt)("inlineCode",{parentName:"p"},"False")," unless ",(0,n.kt)("inlineCode",{parentName:"p"},"ticks_period_ms")," has past, as compared to previous checkpoint."),(0,n.kt)("p",null,"Updates to next checkpoint when ",(0,n.kt)("inlineCode",{parentName:"p"},"True")," is returned"),(0,n.kt)("h2",{id:"repeater-objects"},"Repeater Objects"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"class Repeater()\n")),(0,n.kt)("p",null,"Only for backwards compatibility Replaces for old time.monotonic() Repeater by wrapping current\nTickRepeater."),(0,n.kt)("h2",{id:"catchuprepeater-objects"},"CatchupRepeater Objects"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"class CatchupRepeater()\n")),(0,n.kt)("p",null,"Only for backwards compatibility Replaces for old time.monotonic() CatchupRepeater by wrapping current\nTickRepeater."),(0,n.kt)("h2",{id:"axis-objects"},"Axis Objects"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"class Axis()\n")),(0,n.kt)("p",null,"Used for mapping joysticks."),(0,n.kt)("h4",{id:"__init__"},"_","_","init","_","_"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def __init__(min, dz_neg, dz_pos, max)\n")),(0,n.kt)("p",null,"min, -deadzone, +deadzone, max."),(0,n.kt)("h4",{id:"map"},"map"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"def map(v)\n")),(0,n.kt)("p",null,"returns value mapped to range ","[-1, +1]"))}d.isMDXComponent=!0}}]);