<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/virtual_joystick/device-streams" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">02 - Main Implementation | Farm-ng Developers</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://amiga.farm-ng.com/docs/tutorials/virtual_joystick/device-streams"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="02 - Main Implementation | Farm-ng Developers"><meta data-rh="true" name="description" content="Kivy"><meta data-rh="true" property="og:description" content="Kivy"><link data-rh="true" rel="icon" href="/img/farm-ng_favicon.png"><link data-rh="true" rel="canonical" href="https://amiga.farm-ng.com/docs/tutorials/virtual_joystick/device-streams"><link data-rh="true" rel="alternate" href="https://amiga.farm-ng.com/docs/tutorials/virtual_joystick/device-streams" hreflang="en"><link data-rh="true" rel="alternate" href="https://amiga.farm-ng.com/docs/tutorials/virtual_joystick/device-streams" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EWY2LBZNZX-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Farm-ng Developers RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Farm-ng Developers Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-235819376-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Farm-ng Developers" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.c29cff4a.css">
<script src="/assets/js/runtime~main.9b0a2d97.js" defer="defer"></script>
<script src="/assets/js/main.7e844e23.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Join Farm-ng Discourse forum ðŸ¤– ðŸšœ <a target="_blank" rel="noopener noreferrer" href="https://discourse.farm-ng.com/"> Announcements, Q&A, share codes or ideas.</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/farm-ng_favicon.png" alt="Amiga Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/farm-ng_favicon.png" alt="Amiga Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Amiga Docs</b></a><a class="navbar__item navbar__link" href="/docs/amiga_quick_start/amiga-quick-start">User Manual</a><a class="navbar__item navbar__link" href="/docs/concepts/">Developers</a><a class="navbar__item navbar__link" href="/docs/hardware-tools/recommended-tools">Reference</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/examples/examples-index">Examples</a><a href="https://discourse.farm-ng.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discourse</a><a class="navbar__item navbar__link" href="/docs/support/">Support</a><a href="https://farm-ng.com/products/la-maquina-amiga" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Shop</a></div><div class="navbar__items navbar__items--right"><a href="https://www.youtube.com/channel/UCczyy8tyLbqxjtLE1_8YW3w" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Youtube"></a><a href="https://github.com/farm-ng" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/examples/examples-index">Examples Index</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/examples/hello_main_loop/">Microcontroller Examples</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/examples/events_recorder/">Brain Examples</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/tutorials/introduction/tutorial-introduction">Kivy App Examples</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/introduction/tutorial-introduction">00 -Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/tutorials/camera_streamer/camera-streamer-overview">01 - Camera Streamer Example</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/tutorials/virtual_joystick/virtual-joystick-overview">02 - Virtual Joystick Example</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/virtual_joystick/virtual-joystick-overview">00 - Virtual Joystick Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/virtual_joystick/virtual-joystick-widget">01 - Widget</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/virtual_joystick/device-streams">02 - Main Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/virtual_joystick/further-exercises">03 - Further Exercises</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Kivy App Examples</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">02 - Virtual Joystick Example</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">02 - Main Implementation</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Main Implementation</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kivy">Kivy<a href="#kivy" class="hash-link" aria-label="Direct link to Kivy" title="Direct link to Kivy">â€‹</a></h2>
<p>Now that we have the finished our custom widget we need to first add it to our applications kivy string.
Navigating back to <code>src/res/main.kv</code> we need to import our newly defined widget.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-the-widget">Adding the Widget<a href="#adding-the-widget" class="hash-link" aria-label="Direct link to Adding the Widget" title="Direct link to Adding the Widget">â€‹</a></h3>
<p>To do this, all we need to do is add an instance of our VirtualJoystickWidget to the same level as the
images tabbed panel.
TabbedPanel:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    BoxLayout:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orientation: &#x27;horizontal&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VirtualJoystickWidget:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            id: joystick</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TabbedPanel:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            do_default_tab: False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            id: tab_root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TabbedPanelItem:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                text: &quot;rgb&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    id: rgb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When we run the code now, we should see:
<img loading="lazy" src="https://github.com/farm-ng/amiga-dev-kit/assets/53889589/2d1f0f03-fd47-4b31-a5e6-73189f3802cd" alt="Screenshot from 2024-01-26 13-52-50" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-text">Adding Text<a href="#adding-text" class="hash-link" aria-label="Direct link to Adding Text" title="Direct link to Adding Text">â€‹</a></h3>
<p>One additional feature we felt was important was to read information about
the dashboard state of the Amiga, this could MANUAL_READY, AUTO_ACIVE, or AUTO_READY, etc.</p>
<p>This will be the final update to our kivy string.
Before the VirtualJoystickWidget, we will add a vertical stack of text boxes:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    BoxLayout:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        orientation: &#x27;horizontal&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BoxLayout:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            size_hint_x: 0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            orientation: &#x27;vertical&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Widget:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                size_hint_y: 2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Label:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                text: &quot;Amiga State:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                font_size: 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                size_hint_y: 0.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Label:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                text: app.amiga_state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                font_size: 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Widget: # Empty placeholder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Label:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                text: &quot;Speed [m/s]:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                font_size: 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                size_hint_y: 0.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Label:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                text: app.amiga_speed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                font_size: 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Widget: # Empty placeholder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Label:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                text: &quot;Angular Rate [rad/s]:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                font_size: 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                size_hint_y: 0.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Label:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                text: app.amiga_rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                font_size: 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Widget:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                size_hint_y: 2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VirtualJoystickWidget:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please refer to the <a href="https://github.com/farm-ng/virtual-joystick-v2/blob/main/src/res/main.kv" target="_blank" rel="noopener noreferrer"><code>src/res/main.kv</code></a>
if the placement is confusing.</p>
<p><img loading="lazy" src="https://github.com/farm-ng/amiga-dev-kit/assets/53889589/59207d68-f78e-42a3-ad67-9ea73c6dbcd4" alt="Screenshot from 2024-01-26 13-53-24" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In the
<a href="https://github.com/farm-ng/virtual-joystick/blob/main/src/res/main.kv" target="_blank" rel="noopener noreferrer"><strong><code>src/res/main.kv</code></strong></a>
and <a href="https://github.com/farm-ng/virtual-joystick/blob/main/src/main.py" target="_blank" rel="noopener noreferrer"><strong><code>src/main.py</code></strong></a>
files of the
<a href="https://github.com/farm-ng/virtual-joystick" target="_blank" rel="noopener noreferrer"><strong>virtual-joystick</strong></a>
app we define the kivy app and Python implementation of the
<code>VirtualJoystickApp</code>.</p><p>You should open these files for reference as you follow along.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="python-implementation">Python Implementation<a href="#python-implementation" class="hash-link" aria-label="Direct link to Python Implementation" title="Direct link to Python Implementation">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="imports">Imports<a href="#imports" class="hash-link" aria-label="Direct link to Imports" title="Direct link to Imports">â€‹</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You should have already gone through the
<a href="/docs/tutorials/camera_streamer/camera-streamer-overview"><strong>Camera Streamer Tutorial</strong></a>
based on the
<a href="https://github.com/farm-ng/camera-streamer" target="_blank" rel="noopener noreferrer"><strong>camera-streamer</strong></a>
example app.
Understanding these instructions will rely on understanding those!</p></div></div>
<p>We will need to add a few more imports to the
<a href="/docs/tutorials/camera_streamer/camera-streamer-overview"><strong>Camera Streamer Tutorial</strong></a>
to send and receive canbus messages.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from farm_ng.canbus.canbus_pb2 import Twist2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from farm_ng.canbus.packet import AmigaControlState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from farm_ng.canbus.packet import AmigaTpdo1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These imports are a part of the canbus API which will make more sense in application.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kivy-string-variables">Kivy String Variables<a href="#kivy-string-variables" class="hash-link" aria-label="Direct link to Kivy String Variables" title="Direct link to Kivy String Variables">â€‹</a></h3>
<p>To update the kivy string for the amigas, state, linear and angual velocity, we need to add:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">amiga_state = StringProperty(&quot;???&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">amiga_speed = StringProperty(&quot;???&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">amiga_rate = StringProperty(&quot;???&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="class-initialization">Class Initialization<a href="#class-initialization" class="hash-link" aria-label="Direct link to Class Initialization" title="Direct link to Class Initialization">â€‹</a></h3>
<p>In this tutorial, we introduce the service_config.json file.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def __init__(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_config: EventServiceConfig,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) -&gt; None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    super().__init__()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.counter: int = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.service_config = service_config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.async_tasks: list[asyncio.Task] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.image_decoder = ImageDecoder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.view_name = &quot;rgb&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.max_speed: float = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.max_angular_rate: float = 1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-configurations">Client Configurations<a href="#client-configurations" class="hash-link" aria-label="Direct link to Client Configurations" title="Direct link to Client Configurations">â€‹</a></h3>
<p>The app function looks a little different in this example vs the camera streamer.
Here, we are using the EventServiceConfigList() function to create a list of services our custom application
will subscribe to.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async def app_func(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async def run_wrapper() -&gt; None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # we don&#x27;t actually need to set asyncio as the lib because it is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # the default, but it doesn&#x27;t hurt to be explicit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await self.async_run(async_lib=&quot;asyncio&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for task in self.async_tasks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            task.cancel()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config_list = proto_from_json_file(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.service_config, EventServiceConfigList()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oak0_client: EventClient | None = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    canbus_client: EventClient | None = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for config in config_list.configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if config.name == &quot;oak0&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            oak0_client = EventClient(config)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif config.name == &quot;canbus&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            canbus_client = EventClient(config)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Confirm that EventClients were created for all required services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if None in [oak0_client,canbus_client]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        raise RuntimeError(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            f&quot;No {config} service config in {self.service_config}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Camera task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tasks: list[asyncio.Task] = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        asyncio.create_task(self.stream_camera(oak0_client, view_name))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for view_name in self.STREAM_NAMES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tasks.append(asyncio.ensure_future(self.pose_generator(canbus_client)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return await asyncio.gather(run_wrapper(),*self.tasks)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We create two clients in this example, the oak0_client and the canbus_client from the EventClient().
Here is more information about the <a href="https://github.com/farm-ng/farm-ng-core" target="_blank" rel="noopener noreferrer">event_service</a> framework.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sending-can-messages">Sending CAN Messages<a href="#sending-can-messages" class="hash-link" aria-label="Direct link to Sending CAN Messages" title="Direct link to Sending CAN Messages">â€‹</a></h3>
<p>This function has two main purposes, sending can messages and reading messages from the dashboard.
The dashboards tpd01 messages contains information about the state of the robot (manual, auto) and
velocities. We use the twist2d() structure to send desired velocities to the dashboard which is responsible
for converting those to individual wheel velocities.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async def pose_generator(self, canbus_client: EventClient, period: float = 0.02):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;The pose generator generates twist messages&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while self.root is None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await asyncio.sleep(0.01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    twist = Twist2d()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    joystick: VirtualJoystickWidget = self.root.ids[&quot;joystick&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rate = canbus_client.config.subscriptions[0].every_n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    async for event, payload in canbus_client.subscribe(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SubscribeRequest(uri=Uri(path=&quot;/state&quot;), every_n=rate),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        decode=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message = payload_to_protobuf(event, payload)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tpdo1 = AmigaTpdo1.from_proto(message.amiga_tpdo1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        twist.linear_velocity_x = self.max_speed * joystick.joystick_pose.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        twist.angular_velocity = self.max_angular_rate * -joystick.joystick_pose.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.amiga_state = tpdo1.state.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.amiga_speed = &quot;{:.4f}&quot;.format(twist.linear_velocity_x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.amiga_rate = &quot;{:.4f}&quot;.format(twist.angular_velocity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await canbus_client.request_reply(&quot;/twist&quot;, twist)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        await asyncio.sleep(period)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The <a href="https://github.com/farm-ng/farm-ng-amiga/blob/main/py/farm_ng/canbus/packet.py" target="_blank" rel="noopener noreferrer"><strong><code>AmigaTpdo1</code></strong></a>
message comes from the dashboard and contains the:</p><ul>
<li>state of the Amiga (AmigaControlState)</li>
<li>measured speed (forward positive)</li>
<li>measured angular rate (left positive)</li>
</ul><p>This is the information you&#x27;ll use for closed loop control!</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If you&#x27;re curious to learn more about CAN bus in general, see
<a href="https://www.csselectronics.com/pages/can-bus-simple-intro-tutorial" target="_blank" rel="noopener noreferrer"><strong>CSS Electronics - CAN Bus Explained</strong></a>.
In this virtual joystick tutorial, we are only teaching you to
interact with the canbus client through Amiga state messages.</p></div></div>
<p>To display the values in the <code>Label</code> widgets we use a kivy
<a href="https://kivy.org/doc/stable/api-kivy.properties.html#kivy.properties.StringProperty" target="_blank" rel="noopener noreferrer"><strong><code>StringProperty</code></strong></a>
for each value.
These are bound to the corresponding <code>Label</code> widget text fields,
so we only need to update the value of the <code>StringProperty</code> and
we do not need to update the text field of the <code>Label</code> explicitly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-notes">Other notes<a href="#other-notes" class="hash-link" aria-label="Direct link to Other notes" title="Direct link to Other notes">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service_configjson">service_config.json<a href="#service_configjson" class="hash-link" aria-label="Direct link to service_config.json" title="Direct link to service_config.json">â€‹</a></h3>
<p>The <a href="https://github.com/farm-ng/virtual-joystick-v2/blob/main/service_config.json" target="_blank" rel="noopener noreferrer">service_config</a>
is used to store all the services
that your custom application will use in one place. Here you can specify
which cameras you will be using and at what relative frequency (every_n) and port.
We suggest adjusting the every_n of the oak and canbus client and
evaluate the performance of the app.
We will add the</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-development">Local Development<a href="#local-development" class="hash-link" aria-label="Direct link to Local Development" title="Direct link to Local Development">â€‹</a></h3>
<p>To run while developing, you can run <code>./entry.sh</code> to compile and run the code.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">â€‹</a></h2>
<ul>
<li><a href="https://github.com/farm-ng/farm-ng-amiga/blob/main/py/farm_ng/canbus/packet.py" target="_blank" rel="noopener noreferrer"><strong>farm_ng.canbus.packet</strong></a></li>
<li><a href="https://github.com/farm-ng/farm-ng-amiga/blob/main/protos/farm_ng/canbus/canbus.proto" target="_blank" rel="noopener noreferrer"><strong>canbus.proto</strong></a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/farm-ng/amiga-dev-kit/tree/main/website/docs/tutorials/virtual_joystick/02_main_implementation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorials/virtual_joystick/virtual-joystick-widget"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">01 - Widget</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorials/virtual_joystick/further-exercises"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">03 - Further Exercises</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#kivy" class="table-of-contents__link toc-highlight">Kivy</a><ul><li><a href="#adding-the-widget" class="table-of-contents__link toc-highlight">Adding the Widget</a></li><li><a href="#adding-text" class="table-of-contents__link toc-highlight">Adding Text</a></li></ul></li><li><a href="#python-implementation" class="table-of-contents__link toc-highlight">Python Implementation</a><ul><li><a href="#imports" class="table-of-contents__link toc-highlight">Imports</a></li><li><a href="#kivy-string-variables" class="table-of-contents__link toc-highlight">Kivy String Variables</a></li><li><a href="#class-initialization" class="table-of-contents__link toc-highlight">Class Initialization</a></li><li><a href="#client-configurations" class="table-of-contents__link toc-highlight">Client Configurations</a></li><li><a href="#sending-can-messages" class="table-of-contents__link toc-highlight">Sending CAN Messages</a></li></ul></li><li><a href="#other-notes" class="table-of-contents__link toc-highlight">Other notes</a><ul><li><a href="#service_configjson" class="table-of-contents__link toc-highlight">service_config.json</a></li><li><a href="#local-development" class="table-of-contents__link toc-highlight">Local Development</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/contribute/contribute-website">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discourse.farm-ng.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item" position="left">Discourse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Farm-ng</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/farm-ng/farm-ng-amiga" target="_blank" rel="noopener noreferrer" class="footer__link-item">farm-ng-amiga<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://farm-ng.github.io/farm-ng-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item">farm-ng-core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/farm-ng/amiga-ros-bridge-v1" target="_blank" rel="noopener noreferrer" class="footer__link-item">farm-ng-amiga-ros-bridge<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Sister projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/kornia" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kornia<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/stevenlovegrove/Pangolin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pangolin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://strasdat.github.io/Sophus/latest/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sophus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/farm-ng" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/farm-ng/amiga-dev-kit/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" class="footer__link-item">License<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 Farm-ng, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>